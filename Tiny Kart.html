<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Tiny Kart</title>
  <link type="text/css" rel="stylesheet" href="main.css">
  <style>
			body {
				background-color: #cce0ff;
				color: #000;
			}
			a {
				color: #080;
			}
		</style>
    <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">
    <script id="entryScript"></script>
</head>

<body>

  <script id="fragmentShader" type="x-shader/x-fragment">
      uniform sampler2D map;
      uniform sampler2D shadowMap;
      varying vec2 vUv;
      varying vec2 vUv2;
      void main( void ) {
        vec4 basCol = texture2D(map,vUv);
        if(basCol.a<0.5)discard;
        vec4 shadowCol = texture2D(shadowMap,vUv2*vec2(1.,-1.)+vec2(0.,1.));
        gl_FragColor = vec4(shadowCol*basCol);
        //if(shadowCol.r<0.01)gl_FragColor = vec4(basCol);
      }
    </script>

    <script id="flatShader" type="x-shader/x-fragment">
        uniform sampler2D map;
        uniform vec2 disp;
        uniform float time;
        varying vec2 vUv;
        void main( void ) {
          vec4 basCol = texture2D(map,vUv+disp*time);
          if(basCol.a<0.5)discard;
          gl_FragColor = vec4(basCol);
        }
      </script>

    <script id="boostShader" type="x-shader/x-fragment">
        uniform sampler2D map;
        uniform float time;
        varying vec2 vUv;
        void main( void ) {
          vec3 col = 0.5 + 0.5*cos(time+vUv.yyy+vec3(0,2,4));

          // Output to screen
          gl_FragColor = vec4(col,1.0);
        }
      </script>

    <script id="waterShader" type="x-shader/x-fragment">
          varying vec2 vUv;
          uniform sampler2D map;
          uniform float time;
          const float intensity = 0.2;
          const float minCut = 0.29;
          const float maxCut = 0.64;
          const vec3 blue1 = vec3(0.094,0.567,0.863);
          const vec3 blue2 = vec3(0.415,0.772,0.725);
          //uncomment to activate dark mode!
          //const vec3 blue2 = vec3(0.0078,0.0274,0.2353);
    			void main( void ) {
            vec2 disp = texture2D(map,vUv-vec2(time*0.3+0.2,time*-0.05+0.4)).xy*intensity;
            float col1 = texture2D(map,vUv*1.5+vec2(time*0.1,time*0.1)+disp).x;
            float col2 = texture2D(map,vUv*0.4-vec2(time*0.2+0.2,time*0.05+0.4)+disp).x*-1.0+1.0;
            float col3 = texture2D(map,vUv*0.2+vec2(time*0.1,time*0.1)+disp).x;
            float col4 = texture2D(map,vUv*0.1-vec2(time*0.2+0.2,time*0.05+0.4)+disp).x*-1.0+1.0;
            float col = mix(col1,col2,0.5);
            float bcol = mix(col3,col4,0.5);
            col = (col - 0.5 )*0.9 + 0.5;
            if(col>minCut && col < maxCut){
              col = 0.0;
            }
    				gl_FragColor = vec4(mix(blue1,blue2,bcol)+vec3(col),1.0);
    			}
    </script>


    <script id="vertexShader" type="x-shader/x-vertex">
      attribute vec2 uv2;
      varying vec2 vUv;
      varying vec2 vUv2;
      void main()
      {
        vUv = uv;
        vUv2 = uv2;
        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * mvPosition;
      }
    </script>
    <div id="finishBg"></div>

  <script src="lib/three.min.js"></script>
  <script src="lib/GLTFLoader.js"></script>
  <script src="script/kclLoader.js"></script>
  <script src="shader/commonMaterialLib.js"></script>
  <script src="shader/CopyShader.js"></script>
  <script src="lib/EffectComposer.js"></script>
  <script src="lib/renderPass.js"></script>
  <script src="lib/shaderPass.js"></script>
  <script src="shader/kartMaterial.js"></script>
  <script src="lib/AfterImagePass.js"></script>
  <script src="script/util.js"></script>
  <script src="script/stats.js"></script>
  <script src="script/params.js"></script>
  <script src="script/trackRender.js"></script>
  <script src="script/handleRoad.js"></script>
  <script src="script/popups.js"></script>
  <script src="script/urlboy.js"></script>

</body>
</html>
